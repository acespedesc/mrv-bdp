import{a as V}from"./chunk-OHGPZTAV.js";import{a as pe,b as ce,c as ue,d as ge,e as fe,f as he,g as _e,h as Ce,i as ve,j as be,k as ye,l as Ie,n as P,o as we,p as xe,q as Se}from"./chunk-XBSZIRZA.js";import{a as de}from"./chunk-IXGIIPBD.js";import{b as E,c as T,e as k,f as te,h as D,i as ne,j as ie,k as oe,m as ae,p as re,t as le,u as se,v as me,x as N}from"./chunk-B4EPVZF2.js";import"./chunk-IX6G3U3V.js";import"./chunk-OGI2M7DR.js";import{k as $,m as ee,p as F}from"./chunk-6XSUGG7T.js";import{$ as _,$b as R,Ab as u,Bb as f,Cb as h,Eb as J,Jb as p,Kb as q,Ob as K,Pb as X,Qb as Y,Ub as s,Va as m,Wa as j,Wb as C,Xb as v,Yb as b,Zb as y,ac as Z,bc as M,da as S,gb as U,la as z,ma as G,mb as c,na as H,oa as L,ob as d,pa as O,ua as Q,yb as t,zb as o}from"./chunk-XFA5AQSA.js";import"./chunk-TSRGIXR5.js";var A=n=>({"border-red-500":n});function Ee(n,i){n&1&&(t(0,"div",13),s(1," * "),o())}function Te(n,i){n&1&&(t(0,"div",13),s(1," * "),o())}function ke(n,i){n&1&&(t(0,"div",13),s(1," * "),o())}var W=class n{constructor(i,l){this.fb=i;this.regService=l;this.dataForm=this.fb.group({region:new D("",[T.required]),ghi:new D("",[T.required]),pvout:new D("",[T.required])})}data=null;onCloseModal=new Q;toastr=_(N);dataForm;ngOnChanges(){this.data&&this.dataForm.patchValue({region:this.data.region,ghi:this.data.ghi,pvout:this.data.pvout})}onSubmit(){this.dataForm.valid?this.data?this.regService.actualizaRegionesInstalacion(this.data.id,this.dataForm.value).subscribe({next:i=>{this.resetdataForm(),this.toastr.success("Region actualizado con exito!"),this.data=null}}):this.regService.crearRegionesInstalacion(this.dataForm.value).subscribe({next:i=>{this.resetdataForm(),this.toastr.success("Region registrado con exito!")}}):this.dataForm.markAllAsTouched()}onClose(){this.onCloseModal.emit(!1),this.dataForm.reset()}resetdataForm(){this.dataForm.reset(),this.onClose()}static \u0275fac=function(l){return new(l||n)(j(le),j(V))};static \u0275cmp=S({type:n,selectors:[["app-regiones-instalacion-create"]],inputs:{data:"data"},outputs:{onCloseModal:"onCloseModal"},standalone:!0,features:[z,R],decls:24,vars:13,consts:[[1,"mb-5","text-lg","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"relative","mt-6","flex","items-center"],["type","text","name","region","id","region","placeholder","Region","formControlName","region","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","Region",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["class","absolute -right-4 text-red-500",4,"ngIf"],["type","number","name","ghi","id","monto_inv_me","placeholder","GHI","formControlName","ghi","autocomplete","NA","step","0.01",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","monto_inv_mn",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","number","name","pvout","id","monto_inv_me","placeholder","pvout","formControlName","pvout","autocomplete","NA","step","0.01",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],[1,"my-5"],["type","submit",1,"text-white","bg-blue-600","hover:bg-blue-700","font-medium","rounded-lg","w-full","sm:w-auto","px-5","py-2.5","text-center"],["type","button",1,"text-white","ms-2","bg-gray-700","hover:bg-gray-800","font-medium","rounded-lg","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"absolute","-right-4","text-red-500"]],template:function(l,e){if(l&1&&(t(0,"h5",0),s(1,"Ingresar datos"),o(),t(2,"form",1),p("ngSubmit",function(){return e.onSubmit()}),t(3,"div",2)(4,"div",3),u(5,"input",4),t(6,"label",5),s(7,"Region"),o(),c(8,Ee,2,0,"div",6),o()(),t(9,"div",3),u(10,"input",7),t(11,"label",8),s(12,"GHI(kWh/m2-dia)"),o(),c(13,Te,2,0,"div",6),o(),t(14,"div",3),u(15,"input",9),t(16,"label",8),s(17,"PVOUT(kWh/kWp)"),o(),c(18,ke,2,0,"div",6),o(),t(19,"div",10)(20,"button",11),s(21,"Submit"),o(),t(22,"button",12),p("click",function(){return e.onClose()}),s(23,"Cancel"),o()()()),l&2){let a,r,g,I,w,x;m(2),d("formGroup",e.dataForm),m(3),d("ngClass",M(7,A,((a=e.dataForm.get("region"))==null?null:a.hasError("required"))&&((a=e.dataForm.get("region"))==null?null:a.touched))),m(3),d("ngIf",((r=e.dataForm.get("region"))==null?null:r.hasError("required"))&&((r=e.dataForm.get("region"))==null?null:r.touched)),m(2),d("ngClass",M(9,A,((g=e.dataForm.get("ghi"))==null?null:g.hasError("required"))&&((g=e.dataForm.get("ghi"))==null?null:g.touched))),m(3),d("ngIf",((I=e.dataForm.get("ghi"))==null?null:I.hasError("required"))&&((I=e.dataForm.get("ghi"))==null?null:I.touched)),m(2),d("ngClass",M(11,A,((w=e.dataForm.get("pvout"))==null?null:w.hasError("required"))&&((w=e.dataForm.get("pvout"))==null?null:w.touched))),m(3),d("ngIf",((x=e.dataForm.get("pvout"))==null?null:x.hasError("required"))&&((x=e.dataForm.get("pvout"))==null?null:x.touched))}},dependencies:[F,$,ee,me,ie,E,oe,k,te,ae,re]})};var De=()=>[5,10,25,100];function Ne(n,i){n&1&&(t(0,"th",28),s(1," Id "),o())}function Pe(n,i){if(n&1&&(t(0,"td",29),s(1),o()),n&2){let l=i.$implicit;m(),C(" ",l.id," ")}}function Ve(n,i){n&1&&(t(0,"th",28),s(1," Nombre "),o())}function We(n,i){if(n&1&&(t(0,"td",29),s(1),o()),n&2){let l=i.$implicit;m(),C(" ",l.region," ")}}function Ge(n,i){n&1&&(t(0,"th",28),s(1," GHI (kWh/m2-dia) "),o())}function He(n,i){if(n&1&&(t(0,"td",29),s(1),o()),n&2){let l=i.$implicit;m(),C(" ",l.ghi," ")}}function Le(n,i){n&1&&(t(0,"th",28),s(1," PVOUT (kWh/kWp) "),o())}function Oe(n,i){if(n&1&&(t(0,"td",29),s(1),o()),n&2){let l=i.$implicit;m(),C(" ",l.pvout," ")}}function je(n,i){n&1&&(t(0,"th",28),s(1," Opciones "),o())}function qe(n,i){if(n&1){let l=J();t(0,"td",29)(1,"div",30)(2,"button",31),p("click",function(){let a=G(l).$implicit,r=q();return H(r.loadCaedec(a))}),t(3,"i",32),L(),t(4,"svg",33),u(5,"path",34),o(),O(),t(6,"span",35),s(7," Editar Caedec "),o()()()(),t(8,"div",30)(9,"button",36),p("click",function(){let a=G(l).$implicit,r=q();return H(r.deleteRegionesInstalacion(a.id))}),t(10,"i",37),L(),t(11,"svg",38),u(12,"path",39)(13,"line",40)(14,"line",41)(15,"line",42)(16,"path",43)(17,"path",44),o(),O(),t(18,"span",35),s(19," Eliminar caedec "),o()()()()()}}function Ae(n,i){n&1&&u(0,"tr",45)}function Be(n,i){n&1&&u(0,"tr",46)}var B=class n{regInstalacion=U([]);regService=_(V);toastr=_(N);RegionesInstalacion;isModalOpen=!1;filterId="";filterRegion="";filterGhi="";filterPvout="";displayedColumns=["id","region","ghi","pvout","actions"];dataSource=new Ie([]);paginator;ngOnInit(){this.getRegionesInstalacion()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}getRegionesInstalacion(){this.regService.getRegionesInstalacion().subscribe({next:i=>{this.regInstalacion.set(i),this.dataSource.data=i,this.applyFilter()},error:()=>{this.toastr.error("Error al cargar los datos")}})}loadCaedec(i){console.log(i),this.RegionesInstalacion=i,this.openModal()}applyFilter(){this.dataSource.filterPredicate=(i,l)=>{let[e,a,r,g]=l.trim().split(";");return(e?i.id.toString().toLowerCase().includes(e):!0)&&(a?i.region.toLowerCase().includes(a):!0)&&(r?i.ghi.toString().toLowerCase().includes(r):!0)&&(g?i.pvout.toString().toLowerCase().includes(g):!0)},this.dataSource.filter=[this.filterId.toLowerCase(),this.filterRegion.toLowerCase(),this.filterGhi.toLowerCase(),this.filterPvout.toLowerCase()].join(";")}closeModal(){this.isModalOpen=!1,this.getRegionesInstalacion()}openModal(){this.isModalOpen=!0}deleteRegionesInstalacion(i){this.regService.eliminaRegionesInstalacion(i).subscribe({next:()=>{this.toastr.success("Region  Eliminado"),this.getRegionesInstalacion()}})}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=S({type:n,selectors:[["app-regiones-instalacion"]],viewQuery:function(l,e){if(l&1&&K(P,5),l&2){let a;X(a=Y())&&(e.paginator=a.first)}},standalone:!0,features:[R],decls:39,vars:11,consts:[[1,"mx-auto","sm:px-6","lg:px-8","mb-6"],[1,"mx-4","pb-6","text-3xl","font-bold","text-gray-800"],[1,"border-t-4","border-t-indigo-500","-mt-4","ml-5","w-36"],[1,"mx-auto","sm:px-6","lg:px-8"],[1,"bg-white","overflow-hidden","shadow-xl","sm:rounded-lg","px-4","py-4","dark:bg-gray-800/50","dark:bg-gradient-to-bl"],[1,"flex","items-center","justify-between","dark:text-gray-400","mb-4"],[1,"space-x-8"],["type","button",1,"focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","mt-4","sm:mt-0","inline-flex","items-start","justify-start","px-6","py-3","bg-blue-600","hover:bg-blue-800","focus:outline-none","rounded",3,"click"],[1,"text-sm","font-medium","leading-none","text-white"],[1,"flex","space-x-4"],["matInput","","placeholder","Filtro por ID",3,"ngModelChange","ngModel"],["matInput","","placeholder","Filtro por Region",3,"ngModelChange","ngModel"],["matInput","","placeholder","Filtro por GHI",3,"ngModelChange","ngModel"],["matInput","","placeholder","Filtro por PVOUT",3,"ngModelChange","ngModel"],[1,"shadow","overflow-hidden","border-b","border-gray-200","sm:rounded-lg"],["mat-table","",1,"no-border-table","w-full","divide-y","divide-gray-200","table-auto",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","region"],["matColumnDef","ghi"],["matColumnDef","pvout"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"closeModal","isOpen"],[3,"onCloseModal","data"],["mat-header-cell",""],["mat-cell",""],[1,"group","relative","inline-block","whitespace-nowrap"],[1,"bg-gray-700","w-8","h-8","rounded-full","hover:bg-gray-400","flex","items-center","justify-center",3,"click"],[1,"fas","fa-edit","text-white"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-white-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["role","tooltip",1,"pointer-events-none","absolute","z-50","inline-flex","items-center","justify-center","rounded-md","px-3","py-1","font-semibold","opacity-0","transition-opacity","duration-300","ease-in-out","group-hover:opacity-100","bg-stone-50","text-stone-700","min-h-7","text-sm","left-1/2","-translate-x-1/2","after:absolute","after:block","after:size-0","after:border-8","after:border-transparent","after:border-t-stone-50","after:-bottom-[0.95rem]","after:left-1/2","after:-translate-x-1/2","top-[-2.5rem]"],[1,"bg-red-600","w-8","h-8","rounded-full","hover:bg-red-400","ml-2","flex","items-center","justify-center",3,"click"],[1,"text-white"],["width","4","height","4","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"h-5","w-5","text-white-500"],["stroke","none","d","M0 0h24v24H0z"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"],["mat-header-row",""],["mat-row",""]],template:function(l,e){l&1&&(t(0,"div")(1,"div",0)(2,"h2",1),s(3," Regiones de Instalacion "),o(),u(4,"div",2),o(),t(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"button",7),p("click",function(){return e.openModal()}),t(10,"p",8),s(11,"Add Caedec"),o()()()(),t(12,"div",9)(13,"input",10),y("ngModelChange",function(r){return b(e.filterId,r)||(e.filterId=r),r}),p("ngModelChange",function(){return e.applyFilter()}),o(),t(14,"input",11),y("ngModelChange",function(r){return b(e.filterRegion,r)||(e.filterRegion=r),r}),p("ngModelChange",function(){return e.applyFilter()}),o(),t(15,"input",12),y("ngModelChange",function(r){return b(e.filterGhi,r)||(e.filterGhi=r),r}),p("ngModelChange",function(){return e.applyFilter()}),o(),t(16,"input",13),y("ngModelChange",function(r){return b(e.filterPvout,r)||(e.filterPvout=r),r}),p("ngModelChange",function(){return e.applyFilter()}),o()(),t(17,"div",14)(18,"table",15),f(19,16),c(20,Ne,2,0,"th",17)(21,Pe,2,1,"td",18),h(),f(22,19),c(23,Ve,2,0,"th",17)(24,We,2,1,"td",18),h(),f(25,20),c(26,Ge,2,0,"th",17)(27,He,2,1,"td",18),h(),f(28,21),c(29,Le,2,0,"th",17)(30,Oe,2,1,"td",18),h(),f(31,22),c(32,je,2,0,"th",17)(33,qe,20,0,"td",18),h(),c(34,Ae,1,0,"tr",23)(35,Be,1,0,"tr",24),o(),u(36,"mat-paginator",25),o()()()(),t(37,"app-modal",26),p("closeModal",function(){return e.closeModal()}),t(38,"app-regiones-instalacion-create",27),p("onCloseModal",function(){return e.closeModal()}),o()()),l&2&&(m(13),v("ngModel",e.filterId),m(),v("ngModel",e.filterRegion),m(),v("ngModel",e.filterGhi),m(),v("ngModel",e.filterPvout),m(2),d("dataSource",e.dataSource),m(16),d("matHeaderRowDef",e.displayedColumns),m(),d("matRowDefColumns",e.displayedColumns),m(),d("pageSizeOptions",Z(10,De)),m(),d("isOpen",e.isModalOpen),m(),d("data",e.RegionesInstalacion))},dependencies:[W,de,F,se,E,k,ne,we,P,ye,pe,ue,_e,ge,ce,Ce,fe,he,ve,be,Se,xe]})};export{B as default};
