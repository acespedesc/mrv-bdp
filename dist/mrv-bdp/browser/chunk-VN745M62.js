import{a as ce}from"./chunk-IXGIIPBD.js";import{b as ae,c as h,e as ne,f as ie,h as b,j as le,m as se,p as ue,t as de,v as pe,w as me,x as V}from"./chunk-B4EPVZF2.js";import"./chunk-IX6G3U3V.js";import{f as O}from"./chunk-35W2KPSY.js";import{a as oe}from"./chunk-OGI2M7DR.js";import{k as ee,m as te,p as re}from"./chunk-6XSUGG7T.js";import{$ as c,$b as A,Ab as d,Eb as Z,Jb as p,Kb as H,Ub as a,V as L,Va as l,Vb as _,Wa as $,bc as g,da as q,gb as j,ja as J,la as K,ma as D,mb as f,na as P,oa as G,ob as s,pa as B,ua as Q,ub as W,wb as X,xb as Y,yb as e,zb as t}from"./chunk-XFA5AQSA.js";import"./chunk-TSRGIXR5.js";var x=class n{usuarios=j([]);_http=c(oe);_endPoint=me.apiUrl;_injector=c(J);getUsuarios(){return this._http.get(`${this._endPoint}/usuario`)}crearUsuario(o){return console.log(o),this._http.post(`${this._endPoint}/usuario`,o)}eliminaUsuario(o){return this._http.delete(`${this._endPoint}/usuario/`+o)}actualizaUsuario(o,i){return console.log(o),this._http.put(`${this._endPoint}/usuario/`+o,i)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var y=n=>({"border-red-500":n});function be(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}function ye(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}function xe(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}function _e(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}function ve(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}function Ce(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}function we(n,o){n&1&&(e(0,"div",22),a(1," * "),t())}var z=class n{constructor(o,i){this.fb=o;this.usuarioService=i;this.dataForm=this.fb.group({nombre:new b("",[h.required]),apellido_paterno:new b("",[h.required]),apellido_materno:new b("",[h.required]),nro_documento:new b("",[h.required]),usuario:new b("",[h.required]),correo:new b("",[h.required]),contrase\u00F1a:new b("",[h.required])})}data=null;onCloseModal=new Q;dataForm;toastr=c(V);ngOnChanges(){this.data&&this.dataForm.patchValue({nombre:this.data.nombre,apellido_paterno:this.data.apellido_paterno,apellido_materno:this.data.apellido_materno,nro_documento:this.data.nro_documento,usuario:this.data.usuario,correo:this.data.correo,contrase\u00F1a:this.data.contrase\u00F1a})}onSubmit(){this.dataForm.valid?this.data?this.usuarioService.actualizaUsuario(this.data.id,this.dataForm.value).subscribe({next:o=>{this.resetdataForm(),this.toastr.success("Usuario Actualizado"),this.data=null,console.log("Registro actualizado")},error:o=>{this.toastr.error("Error al actualizar el usuario: "+o.message),console.error("Error al actualizar el registro",o)}}):(console.log(" es nuevo"),this.usuarioService.crearUsuario(this.dataForm.value).subscribe({next:o=>{this.resetdataForm(),this.toastr.success("Usuario Creado")}})):this.dataForm.markAllAsTouched()}onClose(){this.onCloseModal.emit(!1),this.dataForm.reset(),this.data=null}resetdataForm(){this.dataForm.reset(),this.onClose()}static \u0275fac=function(i){return new(i||n)($(de),$(x))};static \u0275cmp=q({type:n,selectors:[["app-usuario-create"]],inputs:{data:"data"},outputs:{onCloseModal:"onCloseModal"},standalone:!0,features:[K,A],decls:44,vars:30,consts:[[1,"mb-5","text-lg","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"relative","mt-6","flex","items-center"],["type","text","name","nombre","id","nombre","placeholder","Nombre","formControlName","nombre","autocomplete","NA",1,"peer","mt-1","w-96","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","nombre",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["class","absolute -right-4 text-red-500",4,"ngIf"],["type","text","name","apellido_paterno","id","apellido_paterno","placeholder","Apellido Paterno","formControlName","apellido_paterno","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","apellido_paterno",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","apellido_materno","id","apellido_materno","placeholder","Apellido Materno","formControlName","apellido_materno","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","apellido_materno",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","nro_documento","id","nro_documento","placeholder","nro documento","formControlName","nro_documento","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","nro_documento",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","usuario","id","usuario","placeholder","usuario","formControlName","usuario","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","usuario",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","correo","id","correo","placeholder","correo","formControlName","correo","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","correo",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","password","name","contrase\xF1a","id","contrase\xF1a","placeholder","contrase\xF1a","formControlName","contrase\xF1a","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"readonly","ngClass"],["for","contrase\xF1a",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],[1,"my-5"],["type","submit",1,"text-white","bg-blue-600","hover:bg-blue-700","font-medium","rounded-lg","w-full","sm:w-auto","px-5","py-2.5","text-center"],["type","button",1,"text-white","ms-2","bg-gray-700","hover:bg-gray-800","font-medium","rounded-lg","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"absolute","-right-4","text-red-500"]],template:function(i,r){if(i&1&&(e(0,"h5",0),a(1,"Ingresar datos"),t(),e(2,"form",1),p("ngSubmit",function(){return r.onSubmit()}),e(3,"div",2)(4,"div",3),d(5,"input",4),e(6,"label",5),a(7,"Nombre"),t(),f(8,be,2,0,"div",6),t(),e(9,"div",3),d(10,"input",7),e(11,"label",8),a(12,"Ap. Paterno"),t(),f(13,ye,2,0,"div",6),t(),e(14,"div",3),d(15,"input",9),e(16,"label",10),a(17,"Ap. Materno"),t(),f(18,xe,2,0,"div",6),t(),e(19,"div",3),d(20,"input",11),e(21,"label",12),a(22,"N\xB0 Documento"),t(),f(23,_e,2,0,"div",6),t(),e(24,"div",3),d(25,"input",13),e(26,"label",14),a(27,"Usuario"),t(),f(28,ve,2,0,"div",6),t(),e(29,"div",3),d(30,"input",15),e(31,"label",16),a(32,"Correo"),t(),f(33,Ce,2,0,"div",6),t(),e(34,"div",3),d(35,"input",17),e(36,"label",18),a(37,"Contrase\xF1a"),t(),f(38,we,2,0,"div",6),t()(),e(39,"div",19)(40,"button",20),a(41,"Submit"),t(),e(42,"button",21),p("click",function(){return r.onClose()}),a(43,"Cancel"),t()()()),i&2){let u,m,v,C,w,F,S,U,E,M,k,N,I,T;l(2),s("formGroup",r.dataForm),l(3),s("ngClass",g(16,y,((u=r.dataForm.get("nombre"))==null?null:u.hasError("required"))&&((u=r.dataForm.get("nombre"))==null?null:u.touched))),l(3),s("ngIf",((m=r.dataForm.get("nombre"))==null?null:m.hasError("required"))&&((m=r.dataForm.get("nombre"))==null?null:m.touched)),l(2),s("ngClass",g(18,y,((v=r.dataForm.get("apellido_paterno"))==null?null:v.hasError("required"))&&((v=r.dataForm.get("apellido_paterno"))==null?null:v.touched))),l(3),s("ngIf",((C=r.dataForm.get("apellido_paterno"))==null?null:C.hasError("required"))&&((C=r.dataForm.get("apellido_paterno"))==null?null:C.touched)),l(2),s("ngClass",g(20,y,((w=r.dataForm.get("apellido_materno"))==null?null:w.hasError("required"))&&((w=r.dataForm.get("apellido_materno"))==null?null:w.touched))),l(3),s("ngIf",((F=r.dataForm.get("apellido_materno"))==null?null:F.hasError("required"))&&((F=r.dataForm.get("apellido_materno"))==null?null:F.touched)),l(2),s("ngClass",g(22,y,((S=r.dataForm.get("nro_documento"))==null?null:S.hasError("required"))&&((S=r.dataForm.get("nro_documento"))==null?null:S.touched))),l(3),s("ngIf",((U=r.dataForm.get("nro_documento"))==null?null:U.hasError("required"))&&((U=r.dataForm.get("nro_documento"))==null?null:U.touched)),l(2),s("ngClass",g(24,y,((E=r.dataForm.get("usuario"))==null?null:E.hasError("required"))&&((E=r.dataForm.get("usuario"))==null?null:E.touched))),l(3),s("ngIf",((M=r.dataForm.get("usuario"))==null?null:M.hasError("required"))&&((M=r.dataForm.get("usuario"))==null?null:M.touched)),l(2),s("ngClass",g(26,y,((k=r.dataForm.get("correo"))==null?null:k.hasError("required"))&&((k=r.dataForm.get("correo"))==null?null:k.touched))),l(3),s("ngIf",((N=r.dataForm.get("correo"))==null?null:N.hasError("required"))&&((N=r.dataForm.get("correo"))==null?null:N.touched)),l(2),s("readonly",r.data!==null)("ngClass",g(28,y,((I=r.dataForm.get("contrase\xF1a"))==null?null:I.hasError("required"))&&((I=r.dataForm.get("contrase\xF1a"))==null?null:I.touched))),l(3),s("ngIf",((T=r.dataForm.get("contrase\xF1a"))==null?null:T.hasError("required"))&&((T=r.dataForm.get("contrase\xF1a"))==null?null:T.touched))}},dependencies:[re,ee,te,O,pe,le,ae,ne,ie,se,ue]})};function Fe(n,o){if(n&1){let i=Z();e(0,"tr",16)(1,"td",19),a(2),t(),e(3,"td",19),a(4),t(),e(5,"td",19),a(6),t(),e(7,"td",19),a(8),t(),e(9,"td",20)(10,"div",21)(11,"button",22),p("click",function(){let u=D(i).$implicit,m=H();return P(u.id&&m.loadUsuario(u))}),e(12,"i",23),G(),e(13,"svg",24),d(14,"path",25),t(),B(),e(15,"span",26),a(16," Editar Usuario "),t()()()(),e(17,"div",21)(18,"button",27),p("click",function(){let u=D(i).$implicit,m=H();return P(u.id&&m.deleteUsuario(u.id))}),e(19,"i",28),G(),e(20,"svg",29),d(21,"path",30)(22,"line",31)(23,"line",32)(24,"line",33)(25,"path",34)(26,"path",35),t(),B(),e(27,"span",26),a(28," Eliminar Usuario "),t()()()()()()}if(n&2){let i=o.$implicit;l(2),_(i.id),l(2),_(i.usuario),l(2),_(i.nombre+" "+i.apellido_paterno+" "+i.apellido_materno),l(2),_(i.correo)}}var R=class n{usuarios=j([]);Usuario=null;usuService=c(x);toastr=c(V);isModalOpen=!1;ngOnInit(){this.getUsuarios()}getUsuarios(){this.usuService.getUsuarios().subscribe({next:o=>{this.usuarios.set(o)},error:()=>{}})}openModal(){this.isModalOpen=!0}loadUsuario(o){this.Usuario=o,this.openModal()}closeModal(){this.isModalOpen=!1,this.getUsuarios()}deleteUsuario(o){console.log(o),this.usuService.eliminaUsuario(o).subscribe({next:i=>{this.toastr.success("Usuario Eliminado"),this.getUsuarios(),console.log("Usuario eliminado")}})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=q({type:n,selectors:[["app-usuario"]],standalone:!0,features:[A],decls:31,vars:2,consts:[[1,"mx-auto","sm:px-6","lg:px-8","mb-6"],[1,"mx-4","pb-6","text-3xl","font-bold","text-gray-800"],[1,"border-t-4","border-t-indigo-500","-mt-4","ml-5","w-36"],[1,"mx-auto","sm:px-6","lg:px-8"],[1,"bg-white","overflow-hidden","shadow-xl","sm:rounded-lg","px-4","py-4","dark:bg-gray-800/50","dark:bg-gradient-to-bl"],[1,"flex","items-center","justify-between","dark:text-gray-400"],[1,"space-x-8","mb-2"],["type","button",1,"focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","mt-4","sm:mt-0","inline-flex","items-start","justify-start","px-6","py-3","bg-blue-600","hover:bg-blue-800","focus:outline-none","rounded",3,"click"],[1,"text-sm","font-medium","leading-none","text-white"],[1,"shadow","overflow-hidden","border-b","border-gray-200","sm:rounded-lg"],[1,"w-full","divide-y","divide-gray-200","table-auto"],[1,"bg-blue-600","text-white"],[1,"text-left","text-xs","font-bold","uppercase"],["scope","col",1,"px-6","py-3"],["scope","col",1,"px-6","py-3","text-center"],[1,"divide-y","divide-gray-200","dark:text-gray-400"],[1,"text-sm","font-medium","text-gray-900"],[3,"closeModal","isOpen"],[3,"onCloseModal","data"],[1,"px-6","py-4","dark:text-gray-400"],[1,"p-3","px-5","flex","justify-end"],[1,"group","relative","inline-block","whitespace-nowrap"],[1,"bg-gray-700","w-8","h-8","rounded-full","hover:bg-gray-400","flex","items-center","justify-center",3,"click"],[1,"fas","fa-edit","text-white"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-white-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["role","tooltip",1,"pointer-events-none","absolute","z-50","inline-flex","items-center","justify-center","rounded-md","px-3","py-1","font-semibold","opacity-0","transition-opacity","duration-300","ease-in-out","group-hover:opacity-100","bg-stone-50","text-stone-700","min-h-7","text-sm","left-1/2","-translate-x-1/2","after:absolute","after:block","after:size-0","after:border-8","after:border-transparent","after:border-t-stone-50","after:-bottom-[0.95rem]","after:left-1/2","after:-translate-x-1/2","top-[-2.5rem]"],[1,"bg-red-600","w-8","h-8","rounded-full","hover:bg-red-400","ml-2","flex","items-center","justify-center",3,"click"],[1,"text-white"],["width","4","height","4","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"h-5","w-5","text-white-500"],["stroke","none","d","M0 0h24v24H0z"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(i,r){i&1&&(e(0,"div")(1,"div",0)(2,"h2",1),a(3," Usuarios(analista) "),t(),d(4,"div",2),t(),e(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"button",7),p("click",function(){return r.openModal()}),e(10,"p",8),a(11,"Add Usuario"),t()()()(),e(12,"div",9)(13,"table",10)(14,"thead",11)(15,"tr",12)(16,"th",13),a(17,"Id"),t(),e(18,"th",13),a(19,"Usuario"),t(),e(20,"th",13),a(21,"nombre"),t(),e(22,"th",13),a(23,"correo"),t(),e(24,"td",14),a(25,"Opciones"),t()()(),e(26,"tbody",15),X(27,Fe,29,4,"tr",16,W),t()()()()()(),e(29,"app-modal",17),p("closeModal",function(){return r.closeModal()}),e(30,"app-usuario-create",18),p("onCloseModal",function(){return r.closeModal()}),t()()),i&2&&(l(27),Y(r.usuarios()),l(2),s("isOpen",r.isModalOpen),l(),s("data",r.Usuario))},dependencies:[ce,z,O]})};export{R as default};
