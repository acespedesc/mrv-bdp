import{a as B}from"./chunk-FC5ZCP22.js";import{a as _e,b as Ce,c as ye,d as Fe,e as xe,f as be,g as ve,h as Te,i as we,j as Se,k as Pe,l as Me,n as R,o as Ee,p as Ie,q as De}from"./chunk-XBSZIRZA.js";import{a as he}from"./chunk-IXGIIPBD.js";import{b as O,c as C,e as j,f as le,h as y,i as se,j as pe,k as de,m as me,p as ce,t as ue,u as fe,v as ge,x as H}from"./chunk-B4EPVZF2.js";import"./chunk-IX6G3U3V.js";import"./chunk-OGI2M7DR.js";import{k as ie,m as ne,p as A}from"./chunk-6XSUGG7T.js";import{$ as x,$b as L,Ab as c,Bb as f,Cb as g,Eb as ee,Jb as u,Kb as J,Ob as te,Pb as ae,Qb as oe,Ub as i,Va as l,Wa as U,Wb as h,Xb as N,Yb as q,Zb as V,ac as re,bc as _,da as k,gb as Z,la as X,ma as z,mb as m,na as G,oa as Q,ob as d,pa as $,ua as Y,yb as t,zb as o}from"./chunk-XFA5AQSA.js";import"./chunk-TSRGIXR5.js";var F=e=>({"border-red-500":e});function Ve(e,r){e&1&&(t(0,"div",20),i(1," * "),o())}function Le(e,r){e&1&&(t(0,"div",20),i(1," * "),o())}function Ae(e,r){e&1&&(t(0,"div",20),i(1," * "),o())}function Oe(e,r){e&1&&(t(0,"div",20),i(1," * "),o())}function je(e,r){e&1&&(t(0,"div",20),i(1," * "),o())}function He(e,r){e&1&&(t(0,"div",20),i(1," * "),o())}var W=class e{constructor(r,n){this.fb=r;this.pftService=n;this.dataForm=this.fb.group({parametro:new y("",[C.required]),fuente:new y("",[C.required]),tipo:new y("",[C.required]),unidad:new y("",[C.required]),valor:new y("",[C.required]),descripcion:new y("",[C.required])})}data=null;onCloseModal=new Y;dataForm;toastr=x(H);ngOnChanges(){this.data&&this.dataForm.patchValue({parametro:this.data.parametro,fuente:this.data.fuente,tipo:this.data.tipo,descripcion:this.data.descripcion,unidad:this.data.unidad,valor:this.data.valor})}onSubmit(){this.dataForm.valid?this.data?this.pftService.actualizaPrecioFactorTasa(this.data.id,this.dataForm.value).subscribe({next:r=>{this.resetdataForm(),this.toastr.success("Precio factor tasa actualizada con exito!"),this.data=null}}):this.pftService.crearPrecioFactorTasa(this.dataForm.value).subscribe({next:r=>{this.resetdataForm(),this.toastr.success("Precio factor tasa registrado con exito!")}}):this.dataForm.markAllAsTouched()}onClose(){this.onCloseModal.emit(!1)}resetdataForm(){this.dataForm.reset(),this.onClose()}static \u0275fac=function(n){return new(n||e)(U(ue),U(B))};static \u0275cmp=k({type:e,selectors:[["app-precio-factor-tasa-create"]],inputs:{data:"data"},outputs:{onCloseModal:"onCloseModal"},standalone:!0,features:[X,L],decls:39,vars:25,consts:[[1,"mb-5","text-lg","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"w-full","max-w-3xl","mx-auto",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"relative","mt-1","flex","items-center"],["type","text","name","parametro","id","parametro","placeholder","parametro","formControlName","parametro","autocomplete","NA",1,"peer","mt-1","w-96","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","parametro",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["class","absolute -right-4 text-red-500",4,"ngIf"],["type","text","name","fuente","id","fuente","placeholder","fuente","formControlName","fuente","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","fuente",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","tipo","id","tipo","placeholder","tipo","formControlName","tipo","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","tipo",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","descripcion","id","descripcion","placeholder","descripcion","formControlName","descripcion","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","descripcion",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","text","name","unidad","id","unidad","placeholder","unidad","formControlName","unidad","autocomplete","NA",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","unidad",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],["type","number","name","valor","id","valor","placeholder","valor","formControlName","valor","autocomplete","NA","step","0.01",1,"peer","mt-1","w-full","border-b-2","border-gray-300","px-2","py-1.5","bg-gray-100","placeholder:text-transparent","focus:border-gray-500","focus:outline-none","focus:bg-white","rounded-md","text-sm",3,"ngClass"],["for","valor",1,"pointer-events-none","absolute","top-0","left-0","origin-left","-translate-y-1/2","transform","text-sm","text-gray-800","opacity-75","transition-all","duration-100","ease-in-out","peer-placeholder-shown:top-1/2","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-500","peer-focus:top-0","peer-focus:pl-0","peer-focus:text-sm","peer-focus:text-gray-800"],[1,"my-5"],["type","submit",1,"text-white","bg-blue-600","hover:bg-blue-700","font-medium","rounded-lg","w-full","sm:w-auto","px-5","py-2.5","text-center"],["type","button",1,"text-white","ms-2","bg-gray-700","hover:bg-gray-800","font-medium","rounded-lg","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"absolute","-right-4","text-red-500"]],template:function(n,a){if(n&1&&(t(0,"h5",0),i(1,"Ingresar datos"),o(),t(2,"form",1),u("ngSubmit",function(){return a.onSubmit()}),t(3,"div",2)(4,"div",3),c(5,"input",4),t(6,"label",5),i(7,"Parametro"),o(),m(8,Ve,2,0,"div",6),o(),t(9,"div",3),c(10,"input",7),t(11,"label",8),i(12,"Fuente"),o(),m(13,Le,2,0,"div",6),o(),t(14,"div",3),c(15,"input",9),t(16,"label",10),i(17,"Tipo"),o(),m(18,Ae,2,0,"div",6),o(),t(19,"div",3),c(20,"input",11),t(21,"label",12),i(22,"Descripcion"),o(),m(23,Oe,2,0,"div",6),o(),t(24,"div",3),c(25,"input",13),t(26,"label",14),i(27,"Unidad"),o(),m(28,je,2,0,"div",6),o(),t(29,"div",3),c(30,"input",15),t(31,"label",16),i(32,"Valor"),o(),m(33,He,2,0,"div",6),o()(),t(34,"div",17)(35,"button",18),i(36,"Submit"),o(),t(37,"button",19),u("click",function(){return a.onClose()}),i(38,"Cancel"),o()()()),n&2){let s,p,b,v,T,w,S,P,M,E,I,D;l(2),d("formGroup",a.dataForm),l(3),d("ngClass",_(13,F,((s=a.dataForm.get("parametro"))==null?null:s.hasError("required"))&&((s=a.dataForm.get("parametro"))==null?null:s.touched))),l(3),d("ngIf",((p=a.dataForm.get("parametro"))==null?null:p.hasError("required"))&&((p=a.dataForm.get("parametro"))==null?null:p.touched)),l(2),d("ngClass",_(15,F,((b=a.dataForm.get("fuente"))==null?null:b.hasError("required"))&&((b=a.dataForm.get("fuente"))==null?null:b.touched))),l(3),d("ngIf",((v=a.dataForm.get("fuente"))==null?null:v.hasError("required"))&&((v=a.dataForm.get("fuente"))==null?null:v.touched)),l(2),d("ngClass",_(17,F,((T=a.dataForm.get("tipo"))==null?null:T.hasError("required"))&&((T=a.dataForm.get("tipo"))==null?null:T.touched))),l(3),d("ngIf",((w=a.dataForm.get("tipo"))==null?null:w.hasError("required"))&&((w=a.dataForm.get("tipo"))==null?null:w.touched)),l(2),d("ngClass",_(19,F,((S=a.dataForm.get("descripcion"))==null?null:S.hasError("required"))&&((S=a.dataForm.get("descripcion"))==null?null:S.touched))),l(3),d("ngIf",((P=a.dataForm.get("descripcion"))==null?null:P.hasError("required"))&&((P=a.dataForm.get("descripcion"))==null?null:P.touched)),l(2),d("ngClass",_(21,F,((M=a.dataForm.get("unidad"))==null?null:M.hasError("required"))&&((M=a.dataForm.get("unidad"))==null?null:M.touched))),l(3),d("ngIf",((E=a.dataForm.get("unidad"))==null?null:E.hasError("required"))&&((E=a.dataForm.get("unidad"))==null?null:E.touched)),l(2),d("ngClass",_(23,F,((I=a.dataForm.get("valor"))==null?null:I.hasError("required"))&&((I=a.dataForm.get("valor"))==null?null:I.touched))),l(3),d("ngIf",((D=a.dataForm.get("valor"))==null?null:D.hasError("required"))&&((D=a.dataForm.get("valor"))==null?null:D.touched))}},dependencies:[ge,pe,O,de,j,le,me,ce,A,ie,ne]})};var Re=()=>[5,10,25,100];function Be(e,r){e&1&&(t(0,"th",30),i(1," Id "),o())}function We(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.id," ")}}function ze(e,r){e&1&&(t(0,"th",30),i(1," Parametro"),o())}function Ge(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.parametro," ")}}function Qe(e,r){e&1&&(t(0,"th",30),i(1," Fuente"),o())}function $e(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.fuente," ")}}function Ue(e,r){e&1&&(t(0,"th",30),i(1," Tipo"),o())}function Je(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.tipo," ")}}function Ke(e,r){e&1&&(t(0,"th",30),i(1," Descripcion"),o())}function Xe(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.descripcion," ")}}function Ye(e,r){e&1&&(t(0,"th",30),i(1," Unidad"),o())}function Ze(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.unidad," ")}}function et(e,r){e&1&&(t(0,"th",30),i(1," Valor"),o())}function tt(e,r){if(e&1&&(t(0,"td",31),i(1),o()),e&2){let n=r.$implicit;l(),h(" ",n.valor," ")}}function at(e,r){e&1&&(t(0,"th",30),i(1," Opciones "),o())}function ot(e,r){if(e&1){let n=ee();t(0,"td",31)(1,"div",32)(2,"button",33),u("click",function(){let s=z(n).$implicit,p=J();return G(p.loadPrecioFactorTasa(s))}),t(3,"i",34),Q(),t(4,"svg",35),c(5,"path",36),o(),$(),t(6,"span",37),i(7," Editar "),o()()(),t(8,"button",38),u("click",function(){let s=z(n).$implicit,p=J();return G(p.deletePrecioFactorTasa(s.id))}),t(9,"i",39),Q(),t(10,"svg",40),c(11,"path",41)(12,"line",42)(13,"line",43)(14,"line",44)(15,"path",45)(16,"path",46),o(),$(),t(17,"span",37),i(18," Eliminar "),o()()()()()}}function rt(e,r){e&1&&c(0,"tr",47)}function it(e,r){e&1&&c(0,"tr",48)}var K=class e{precioFactorTasa=Z([]);isModalOpen=!1;toastr=x(H);PrecioFactorTasa;dataSource=new Me([]);displayedColumns=["id","parametro","fuente","tipo","descripcion","unidad","valor","actions"];paginator;pftService=x(B);filterId="";filterParametro="";filterTipo="";ngOnInit(){this.getPrecioFactorTasa()}getPrecioFactorTasa(){this.pftService.getPrecioFactorTasa().subscribe({next:r=>{this.precioFactorTasa.set(r),this.dataSource.data=r,this.applyFilter()},error:()=>{this.toastr.error("Error al cargar los datos")}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}applyFilter(){this.dataSource.filterPredicate=(r,n)=>{let[a,s,p]=n.trim().split(";");return(a?r.id.toString().toLowerCase().includes(a):!0)&&(s?r.parametro.toLowerCase().includes(s):!0)&&(p?r.tipo.toString().toLowerCase().includes(p):!0)},this.dataSource.filter=[this.filterId.toLowerCase(),this.filterParametro.toLowerCase(),this.filterTipo.toLowerCase()].join(";")}loadPrecioFactorTasa(r){console.log(r),this.PrecioFactorTasa=r,this.openModal()}closeModal(){this.isModalOpen=!1,this.getPrecioFactorTasa()}openModal(){this.isModalOpen=!0}deletePrecioFactorTasa(r){this.pftService.eliminaPrecioFactorTasa(r).subscribe({next:()=>{this.toastr.success("Linea Base Eliminada"),this.getPrecioFactorTasa()}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=k({type:e,selectors:[["app-precio-factor-tasa"]],viewQuery:function(n,a){if(n&1&&te(R,5),n&2){let s;ae(s=oe())&&(a.paginator=s.first)}},standalone:!0,features:[L],decls:47,vars:10,consts:[[1,"mx-auto","sm:px-6","lg:px-8","mb-6"],[1,"mx-4","pb-6","text-3xl","font-bold","text-gray-800"],[1,"border-t-4","border-t-indigo-500","-mt-4","ml-5","w-36"],[1,"mx-auto","sm:px-6","lg:px-8"],[1,"bg-white","overflow-hidden","shadow-xl","sm:rounded-lg","px-4","py-4","dark:bg-gray-800/50","dark:bg-gradient-to-bl"],[1,"flex","items-center","justify-between","dark:text-gray-400","mb-4"],[1,"space-x-8"],["type","button",1,"focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","mt-4","sm:mt-0","inline-flex","items-start","justify-start","px-6","py-3","bg-blue-600","hover:bg-blue-800","focus:outline-none","rounded",3,"click"],[1,"text-sm","font-medium","leading-none","text-white"],[1,"flex","space-x-4"],["matInput","","placeholder","Filtro por ID",3,"ngModelChange","ngModel"],["matInput","","placeholder","Filtro por  Parametro",3,"ngModelChange","ngModel"],["matInput","","placeholder","Filtro por Tipo",3,"ngModelChange","ngModel"],[1,"shadow","overflow-hidden","border-b","border-gray-200","sm:rounded-lg"],["mat-table","",1,"no-border-table","w-full","divide-y","divide-gray-200","table-auto",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","parametro"],["matColumnDef","fuente"],["matColumnDef","tipo"],["matColumnDef","descripcion"],["matColumnDef","unidad"],["matColumnDef","valor"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"closeModal","isOpen"],[3,"onCloseModal","data"],["mat-header-cell",""],["mat-cell",""],[1,"relative","flex","items-center"],[1,"bg-gray-700","w-8","h-8","rounded-full","hover:bg-gray-400","flex","items-center","justify-center",3,"click"],[1,"fas","fa-edit","text-white"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-white-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["role","tooltip",1,"pointer-events-none","absolute","z-50","inline-flex","items-center","justify-center","rounded-md","px-3","py-1","font-semibold","opacity-0","transition-opacity","duration-300","ease-in-out","group-hover:opacity-100","bg-stone-50","text-stone-700","min-h-7","text-sm","left-1/2","-translate-x-1/2","after:absolute","after:block","after:size-0","after:border-8","after:border-transparent","after:border-t-stone-50","after:-bottom-[0.95rem]","after:left-1/2","after:-translate-x-1/2","top-[-2.5rem]"],[1,"bg-red-600","w-8","h-8","rounded-full","hover:bg-red-400","ml-2","flex","items-center","justify-center",3,"click"],[1,"text-white"],["width","4","height","4","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"h-5","w-5","text-white-500"],["stroke","none","d","M0 0h24v24H0z"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"],["mat-header-row",""],["mat-row",""]],template:function(n,a){n&1&&(t(0,"div")(1,"div",0)(2,"h2",1),i(3," Precios Factores y Tasas "),o(),c(4,"div",2),o(),t(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"button",7),u("click",function(){return a.openModal()}),t(10,"p",8),i(11,"Add Precio Factor Tasa"),o()()()(),t(12,"div",9)(13,"input",10),V("ngModelChange",function(p){return q(a.filterId,p)||(a.filterId=p),p}),u("ngModelChange",function(){return a.applyFilter()}),o(),t(14,"input",11),V("ngModelChange",function(p){return q(a.filterParametro,p)||(a.filterParametro=p),p}),u("ngModelChange",function(){return a.applyFilter()}),o(),t(15,"input",12),V("ngModelChange",function(p){return q(a.filterTipo,p)||(a.filterTipo=p),p}),u("ngModelChange",function(){return a.applyFilter()}),o()(),t(16,"div",13)(17,"table",14),f(18,15),m(19,Be,2,0,"th",16)(20,We,2,1,"td",17),g(),f(21,18),m(22,ze,2,0,"th",16)(23,Ge,2,1,"td",17),g(),f(24,19),m(25,Qe,2,0,"th",16)(26,$e,2,1,"td",17),g(),f(27,20),m(28,Ue,2,0,"th",16)(29,Je,2,1,"td",17),g(),f(30,21),m(31,Ke,2,0,"th",16)(32,Xe,2,1,"td",17),g(),f(33,22),m(34,Ye,2,0,"th",16)(35,Ze,2,1,"td",17),g(),f(36,23),m(37,et,2,0,"th",16)(38,tt,2,1,"td",17),g(),f(39,24),m(40,at,2,0,"th",16)(41,ot,19,0,"td",17),g(),m(42,rt,1,0,"tr",25)(43,it,1,0,"tr",26),o(),c(44,"mat-paginator",27),o()()(),t(45,"app-modal",28),u("closeModal",function(){return a.closeModal()}),t(46,"app-precio-factor-tasa-create",29),u("onCloseModal",function(){return a.closeModal()}),o()()()),n&2&&(l(13),N("ngModel",a.filterId),l(),N("ngModel",a.filterParametro),l(),N("ngModel",a.filterTipo),l(2),d("dataSource",a.dataSource),l(25),d("matHeaderRowDef",a.displayedColumns),l(),d("matRowDefColumns",a.displayedColumns),l(),d("pageSizeOptions",re(9,Re)),l(),d("isOpen",a.isModalOpen),l(),d("data",a.PrecioFactorTasa))},dependencies:[A,he,W,fe,O,j,se,Ee,R,Pe,_e,ye,ve,Fe,Ce,Te,xe,be,we,Se,De,Ie]})};export{K as default};
