import{w as l}from"./chunk-B4EPVZF2.js";import{b as n}from"./chunk-35W2KPSY.js";import{a as u}from"./chunk-OGI2M7DR.js";import{$ as a,V as i,g as r}from"./chunk-XFA5AQSA.js";var s=class o{_http=a(u);_endPoint=l.apiUrl;router=a(n);userSubject=new r(null);userIdSubject=new r(null);user$=this.userSubject.asObservable();userId$=this.userIdSubject.asObservable();constructor(){let e=localStorage.getItem("usuario")||"null",t=localStorage.getItem("usuarioId")||"null";this.userSubject.next(e),this.userIdSubject.next(t)}login(e){this._http.post(`${this._endPoint}/login`,e).subscribe(t=>{localStorage.setItem("token",t.token),localStorage.setItem("usuario",t.nombre),localStorage.setItem("usuarioId",t.id),this.router.navigate(["/layout"]),this.userSubject.next(t.nombre),this.userIdSubject.next([t.id])})}logout(){localStorage.removeItem("token"),localStorage.removeItem("usuario"),this.userSubject.next(null)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{s as a};
