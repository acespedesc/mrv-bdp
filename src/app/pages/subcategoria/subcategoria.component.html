<div class="py-1">
    <div class="mx-auto sm:px-6 lg:px-8 mb-6">
        <h2 class="mx-4 pb-6 text-3xl font-bold text-gray-800">
            Subcategoria
        </h2>
        <div class="border-t-4 border-t-indigo-500 -mt-4 ml-5 w-64"></div>
    </div>
    <div class="mx-auto sm:px-6 lg:px-8">
        <div
            class="bg-white overflow-hidden shadow-xl sm:rounded-lg px-4 py-4 dark:bg-gray-800/50 dark:bg-gradient-to-bl">
            <div class="flex items-center justify-between dark:text-gray-400">
                <div class="space-x-8 mb-2">
                    <button type="button" (click)="openModal()"
                        class="focus:ring-2 focus:ring-offset-2 focus:ring-blue-700 mt-4 sm:mt-0 inline-flex items-start justify-start px-6 py-3 bg-blue-600 hover:bg-blue-700 focus:outline-none rounded">
                        <p class="text-sm font-medium leading-none text-white">Add Subcategoria</p>
                    </button>
                </div>
            </div>
            <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 table-auto">
                        <thead class="bg-blue-500 text-white">
                            <tr class="text-left text-xs font-bold uppercase">
                                <th scope="col" class="px-6 py-3">Id</th>
                                <th scope="col" class="px-6 py-3">Medida Estandar</th>
                                <th scope="col" class="px-6 py-3 text-center">Opciones</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 dark:text-gray-400">
                            @for (Subcategoria of subcategorias(); track $index) {
                                <tr class="text-sm font-medium text-gray-900">
                                    <td class="px-6 py-4 dark:text-gray-400">{{Subcategoria.id}}</td>
                                    <td class="px-6 py-4 dark:text-gray-400">{{Subcategoria.medida_estandar}}</td>
                                    <td class="p-3 px-5 flex justify-end">
                                        <div class="group relative inline-block whitespace-nowrap">
                                            <button (click)="Subcategoria.id && loadSubcategoira(Subcategoria)"
                                                class="bg-gray-700 w-8 h-8 rounded-full hover:bg-gray-400 flex items-center justify-center">
                                                <i class="fas fa-edit text-white">
                                                    <svg class="h-5 w-5 text-white-500" fill="none" viewBox="0 0 24 24"
                                                        stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2"
                                                            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                                    </svg>
                                                    <span role="tooltip"
                                                        class="pointer-events-none absolute z-50 inline-flex items-center justify-center rounded-md px-3 py-1 font-semibold opacity-0 transition-opacity duration-300 ease-in-out group-hover:opacity-100 bg-stone-50 text-stone-700 min-h-7 text-sm left-1/2 -translate-x-1/2 after:absolute after:block after:size-0 after:border-8 after:border-transparent after:border-t-stone-50 after:-bottom-[0.95rem] after:left-1/2 after:-translate-x-1/2 top-[-2.5rem]">
                                                        Editar Subcategoira
                                                    </span>
                                                </i>
                                            </button>
                                        </div>
                                        <div class="group relative inline-block whitespace-nowrap">
                                            <button (click)="Subcategoria.id && deleteSubcategoria(Subcategoria.id)"
                                                class="bg-red-600 w-8 h-8 rounded-full hover:bg-red-400 ml-2 flex items-center justify-center">
                                                <i class="text-white">
                                                    <svg class="h-5 w-5 text-white-500" width="4" height="4"
                                                        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                                        fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" />
                                                        <line x1="4" y1="7" x2="20" y2="7" />
                                                        <line x1="10" y1="11" x2="10" y2="17" />
                                                        <line x1="14" y1="11" x2="14" y2="17" />
                                                        <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                                                        <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                                                    </svg>
                                                    <span role="tooltip"
                                                        class="pointer-events-none absolute z-50 inline-flex items-center justify-center rounded-md px-3 py-1 font-semibold opacity-0 transition-opacity duration-300 ease-in-out group-hover:opacity-100 bg-stone-50 text-stone-700 min-h-7 text-sm left-1/2 -translate-x-1/2 after:absolute after:block after:size-0 after:border-8 after:border-transparent after:border-t-stone-50 after:-bottom-[0.95rem] after:left-1/2 after:-translate-x-1/2 top-[-2.5rem]">
                                                        Eliminar Subcategoria
                                                    </span>
                                                </i>
                                            </button>
                                        </div>
                                        <div class="group relative inline-block whitespace-nowrap">
                                            <button (click)="openModalInvElegible(Subcategoria.id)"
                                                class="bg-gray-700 w-8 h-8 rounded-full hover:bg-gray-500 flex items-center justify-center ml-2">
                                                <i class=" text-white">
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                        stroke-width="1.5" stroke="currentColor" class="size-5">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0-3-3m3 3 3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                                                    </svg>
                                                    <span role="tooltip"
                                                        class="pointer-events-none absolute z-50 inline-flex items-center justify-center rounded-md px-3 py-1 font-semibold opacity-0 transition-opacity duration-300 ease-in-out group-hover:opacity-100 bg-stone-50 text-stone-700 min-h-7 text-sm left-1/2 -translate-x-1/2 after:absolute after:block after:size-0 after:border-8 after:border-transparent after:border-t-stone-50 after:-bottom-[0.95rem] after:left-1/2 after:-translate-x-1/2 top-[-2.5rem]">
                                                        Inversion Elegible
                                                    </span>
                                                </i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<app-modal [isOpen]="isModalOpen" (closeModal)="closeModal()">

    <app-subcategoria-create (onCloseModal)="closeModal()" [data]="Subcategoria"></app-subcategoria-create>

</app-modal>

<app-modal [isOpen]="isModalInvEleOpen" (closeModal)="closeModalInvEle()">
    <app-invversion-elegible (onCloseModalInvEle)="closeModalInvEle()" [subcategoriaId]="selectedSubcategoriaId"></app-invversion-elegible>
</app-modal>
